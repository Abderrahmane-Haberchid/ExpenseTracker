<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             xmlns:viewModels="clr-namespace:ExpenseTracker.ViewModels"
             x:DataType="viewModels:AddTransactionViewModel"
             x:Class="ExpenseTracker.Views.AddTransactionView">
    
    <!-- Here i define All resources, Styles, colors... -->
     <UserControl.Resources>
        <!-- Next-Gen Color System with Dark Mode Support -->
        <SolidColorBrush x:Key="PrimaryBrush" Color="#5B21B6" />
        <SolidColorBrush x:Key="PrimaryLightBrush" Color="#7C3AED" />
        <SolidColorBrush x:Key="SecondaryBrush" Color="#EC4899" />
        <SolidColorBrush x:Key="AccentBrush" Color="#06B6D4" />
        <SolidColorBrush x:Key="SurfaceBrush" Color="#FFFFFF" />
        <SolidColorBrush x:Key="SurfaceVariantBrush" Color="#F8FAFC" />
        <SolidColorBrush x:Key="BackgroundBrush" Color="#FAFBFC" />
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="#0F172A" />
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#475569" />
        <SolidColorBrush x:Key="TextTertiaryBrush" Color="#94A3B8" />
        <SolidColorBrush x:Key="IncomeBrush" Color="#059669" />
        <SolidColorBrush x:Key="ExpenseBrush" Color="#DC2626" />
        <SolidColorBrush x:Key="SuccessBrush" Color="#10B981" />
        <SolidColorBrush x:Key="WarningBrush" Color="#F59E0B" />
        
        <!-- Advanced Shadow System -->
        <BoxShadows x:Key="ShadowMedium">0 4 6 -1 #0000000F, 0 2 4 -2 #00000008</BoxShadows>
        <BoxShadows x:Key="ShadowLarge">0 10 15 -3 #00000012, 0 4 6 -4 #0000000A</BoxShadows>
        
        <!-- Typography Scale -->
        <FontFamily x:Key="DisplayFont">SF Pro Display, -apple-system, Inter, system-ui, sans-serif</FontFamily>
        <FontFamily x:Key="TextFont">SF Pro Text, -apple-system, Inter, system-ui, sans-serif</FontFamily>
        
        <!-- Gradient Collections -->
        <LinearGradientBrush x:Key="PrimaryGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#5B21B6" Offset="0" />
            <GradientStop Color="#7C3AED" Offset="0.5" />
            <GradientStop Color="#EC4899" Offset="1" />
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="IncomeGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#059669" Offset="0" />
            <GradientStop Color="#10B981" Offset="1" />
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="ExpenseGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#DC2626" Offset="0" />
            <GradientStop Color="#EF4444" Offset="1" />
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="BackgroundGradient" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#FAFBFC" Offset="0" />
            <GradientStop Color="#F1F5F9" Offset="0.3" />
            <GradientStop Color="#E2E8F0" Offset="1" />
        </LinearGradientBrush>
        
    </UserControl.Resources>

    <UserControl.Styles>
        <!-- Main Title Style -->
        <Style Selector="TextBlock.main-title">
            <Setter Property="FontFamily" Value="{StaticResource DisplayFont}" />
            <Setter Property="FontSize" Value="30" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="Margin" Value="0,30,0,40" />
            <Setter Property="TextAlignment" Value="Center" />
        </Style>
        
        <!-- Transaction Type Button Style -->
        <Style Selector="Button.transaction-type">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="CornerRadius" Value="25" />
            <Setter Property="Padding" Value="40,16" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontFamily" Value="{StaticResource TextFont}" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2" />
                </Transitions>
            </Setter>
        </Style>
        
        <!-- Income Button Specific -->
        <Style Selector="Button.income-btn">
            <Setter Property="BorderBrush" Value="{StaticResource IncomeBrush}" />
            <Setter Property="Foreground" Value="{StaticResource IncomeBrush}" />
        </Style>
        
        <!-- Expense Button Specific -->
        <Style Selector="Button.expense-btn">
            <Setter Property="BorderBrush" Value="{StaticResource ExpenseBrush}" />
            <Setter Property="Foreground" Value="{StaticResource ExpenseBrush}" />
        </Style>
        
        <!-- Income Button Selected State -->
        <Style Selector="Button.income-btn.selected">
            <Setter Property="Background" Value="{StaticResource IncomeGradient}" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderBrush" Value="{StaticResource IncomeBrush}" />
            <Setter Property="RenderTransform" Value="scale(1.05)" />
        </Style>
        
        <!-- Expense Button Selected State -->
        <Style Selector="Button.expense-btn.selected">
            <Setter Property="Background" Value="{StaticResource ExpenseGradient}" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderBrush" Value="{StaticResource ExpenseBrush}" />
            <Setter Property="RenderTransform" Value="scale(1.05)" />
        </Style>
        
        <!-- Form Container Style -->
        <Style Selector="StackPanel.form-container">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
            <Setter Property="Margin" Value="40,10,40,40" />
        </Style>
        
        <!-- Glassmorphism Card Style -->
        <Style Selector="Border.glass-card">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
            <Setter Property="CornerRadius" Value="24" />
            <Setter Property="BoxShadow" Value="{StaticResource ShadowLarge}" />
            <Setter Property="Padding" Value="40" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="BorderBrush" Value="#E2E8F0" />
            <Setter Property="Margin" Value="20" />
        </Style>
        
        <!-- Form Field Container -->
        <Style Selector="StackPanel.field-container">
            <Setter Property="Margin" Value="0,0,0,24" />
            <Setter Property="Spacing" Value="8" />
        </Style>
        
        <!-- Form Labels -->
        <Style Selector="TextBlock.field-label">
            <Setter Property="FontFamily" Value="{StaticResource TextFont}" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="Margin" Value="-40,0,0,0" />
        </Style>
        
        <!-- Enhanced TextBox Style -->
        <Style Selector="TextBox.modern-input">
            <Setter Property="Background" Value="{StaticResource SurfaceVariantBrush}" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="16,14" />
            <Setter Property="FontFamily" Value="{StaticResource TextFont}" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="CaretBrush" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="SelectionBrush" Value="{StaticResource PrimaryLightBrush}" />
            <Setter Property="MinWidth" Value="280" />
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2" />
                    <BrushTransition Property="Background" Duration="0:0:0.2" />
                </Transitions>
            </Setter>
        </Style>
        
        <Style Selector="TextBox.modern-input:focus">
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="Background" Value="White" />
        </Style>
        
        <Style Selector="TextBox.modern-input:pointerover">
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryLightBrush}" />
        </Style>
        
        <!-- Large TextBox for Notes -->
        <Style Selector="TextBox.large-input">
            <Setter Property="Background" Value="{StaticResource SurfaceVariantBrush}" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="16,14" />
            <Setter Property="FontFamily" Value="{StaticResource TextFont}" />
            <Setter Property="FontSize" Value="15" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="CaretBrush" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="SelectionBrush" Value="{StaticResource PrimaryLightBrush}" />
            <Setter Property="MinWidth" Value="280" />
            <Setter Property="Height" Value="120" />
            <Setter Property="TextWrapping" Value="Wrap" />
            <Setter Property="AcceptsReturn" Value="True" />
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2" />
                    <BrushTransition Property="Background" Duration="0:0:0.2" />
                </Transitions>
            </Setter>
        </Style>
        
        <Style Selector="TextBox.large-input:focus">
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="Background" Value="White" />
        </Style>
        
        <!-- Modern ComboBox Style -->
        <Style Selector="ComboBox.modern-combo">
            <Setter Property="Background" Value="{StaticResource SurfaceVariantBrush}" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="16,14" />
            <Setter Property="FontFamily" Value="{StaticResource TextFont}" />
            <Setter Property="FontSize" Value="15" />       
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="Width" Value="280" />
            <Setter Property="Margin" Value="-40, 0, 0, 0" />
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2" />
                    <BrushTransition Property="Background" Duration="0:0:0.2" />
                </Transitions>
            </Setter>
        </Style>
        
        <Style Selector="ComboBox.modern-combo:focus">
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}" />
            <Setter Property="Background" Value="White" />
        </Style>
        
        <Style Selector="ComboBox.modern-combo:pointerover">
            <Setter Property="BorderBrush" Value="{StaticResource PrimaryLightBrush}" />
        </Style>
        
        <!-- ComboBox Items with Icons -->
        <Style Selector="StackPanel.combo-item">
            <Setter Property="Orientation" Value="Horizontal" />
            <Setter Property="Spacing" Value="12" />
            <Setter Property="Margin" Value="8,4" />
        </Style>
        
        <Style Selector="Image.category-icon">
            <Setter Property="Width" Value="20" />
            <Setter Property="Height" Value="20" />
        </Style>
        
        <Style Selector="Label.category-label">
            <Setter Property="FontFamily" Value="{StaticResource TextFont}" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        
        <!-- Neumorphism Button Style -->
        <Style Selector="Button.neomorphic">
            <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CornerRadius" Value="16" />
            <Setter Property="Padding" Value="20,16" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        
        <!-- Enhanced Expander Style -->
        <Style Selector="Expander.transaction-card">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="BorderBrush" Value="Transparent" />
        </Style>
        
        <!-- Button Container Style -->
        <Style Selector="StackPanel.button-container">
            <Setter Property="Orientation" Value="Horizontal" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="Spacing" Value="24" />
            <Setter Property="Margin" Value="0,0,0,40" />
        </Style>
        
        <!-- Modern Submit Button Style -->
        <Style Selector="Button.submit-btn">
            <Setter Property="Background" Value="{StaticResource PrimaryGradient}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CornerRadius" Value="20" />
            <Setter Property="Padding" Value="30,18" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontFamily" Value="{StaticResource TextFont}" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="MinWidth" Value="200" />
            <Setter Property="Margin" Value="0,32,0,0" />
            <Setter Property="Transitions">
                <Transitions>
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.2" />
                    <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
                </Transitions>
            </Setter>
        </Style>
        
        <Style Selector="Button.submit-btn:pressed">
            <Setter Property="RenderTransform" Value="translateY(-1px) scale(0.98)" />
            <Setter Property="Opacity" Value="0.9" />
        </Style>
        
        <Style Selector="Button.submit-btn:disabled">
            <Setter Property="Background">
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#94A3B8" Offset="0" />
                    <GradientStop Color="#CBD5E1" Offset="1" />
                </LinearGradientBrush>
            </Setter>
            <Setter Property="RenderTransform" Value="none" />
            <Setter Property="Cursor" Value="Arrow" />
            <Setter Property="Opacity" Value="0.6" />
        </Style>
    </UserControl.Styles>

    <UserControl.Background>
        <StaticResource ResourceKey="BackgroundGradient" />
    </UserControl.Background>
    
    <!-- Done with resources ======= -->
    
   <ScrollViewer VerticalScrollBarVisibility="Hidden"> 
    <Grid RowDefinitions="Auto, Auto, Auto">
        <StackPanel Grid.Row="0">
            <TextBlock Text="Choose Transaction " Classes="main-title" />
        </StackPanel>
        
        <StackPanel Grid.Row="1" Classes="button-container">
            <Button Content="Income" 
                    Command="{Binding SetIsIncomeCommand}" 
                    Classes="transaction-type income-btn"
                    Classes.selected="{Binding IsIncome}"/>
            
            <Button Content="Expense" 
                    Command="{Binding SetIsExpenseCommand}" 
                    Classes="transaction-type expense-btn" 
                    Classes.selected="{Binding IsExpense}"/>
        </StackPanel>
        
        <!-- This is Expense Form  -->
        <Border Grid.Row="2" Classes="glass-card" IsVisible="{Binding IsExpense}">
            <StackPanel Orientation="Vertical" VerticalAlignment="Center" 
                        HorizontalAlignment="Left"
                        Classes="form-container">
                <StackPanel Orientation="Vertical" Classes="field-container">
                    <TextBlock Text="Amount: *" Classes="field-label" />
                    <TextBox Classes="modern-input"
                             Text="{Binding Amount}"
                             Watermark="Amount of your expense..."/>
                </StackPanel>
                
                <StackPanel Orientation="Vertical" Classes="field-container">
                    <TextBlock Text="Category: *" Classes="field-label" />
                    <ComboBox Classes="modern-combo"
                              SelectedItem="{Binding Category}">
                        <!-- Recent/Frequent -->
                        <ComboBoxItem IsEnabled="False" Classes="combo-item"> Recently Used </ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">☕ Coffee</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">⛽ Gas</ComboBoxItem>
    
                        <Separator />
    
                        <!-- Essential Categories -->
                        <ComboBoxItem Classes="combo-item">🍕 Food - Dining</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">🍽 Groceries</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">💰 Bills - Finance</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">🚗 Transportation - Car</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">💰 Salary - Income</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">🏠 Housing</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">👕 Shopping</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">💰 Salary - Income</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">📈 Investment</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">🎬 Entertainment</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">🏥 Healthcare</ComboBoxItem>
                        <ComboBoxItem Classes="combo-item">✨ Other</ComboBoxItem>
    
                        <Separator />
                        <ComboBoxItem>➕ Add Custom Category</ComboBoxItem>
                    </ComboBox>
                </StackPanel>
                
                <StackPanel Orientation="Vertical" Classes="field-container">
                    <TextBlock Text="Name: *" Classes="field-label" />
                    <TextBox Classes="modern-input"
                             Text="{Binding Name}"
                             Watermark="Name of your expense..."/>
                </StackPanel>
                
                <StackPanel Orientation="Vertical" Classes="field-container">
                    <TextBlock Text="Note: " Classes="field-label" />
                    <TextBox Classes="large-input"
                             Text="{Binding Notes}"
                             Watermark="Add a note as a reminder of this expense..."/>
                </StackPanel>
                
                <!-- Submit Button -->
                <Button Content="💸 Add Expense" 
                        Classes="submit-btn" 
                        Command="{Binding SubmitExpenseCommand}" />
            </StackPanel>
            
        </Border>
        
        <!-- Income Form start here  -->
        
        <Border Grid.Row="2" Classes="glass-card" 
                IsVisible="{Binding IsIncome}">
            <StackPanel Orientation="Vertical" VerticalAlignment="Top"
                        HorizontalAlignment="Left"
                        Classes="form-container">
                <StackPanel Orientation="Vertical" Classes="field-container">
                    <TextBlock Text="Amount: *" Classes="field-label" />
                    <TextBox Classes="modern-input"
                             Text="{Binding Amount}"
                             Watermark="Amount of your income..."/>
                </StackPanel>
                
                <StackPanel Orientation="Vertical" Classes="field-container">
                    <TextBlock Text="Name: *" Classes="field-label" />
                    <TextBox Classes="modern-input"
                             Text="{Binding Name}"
                             Watermark="Name of your income..."/>
                </StackPanel>
                
                <StackPanel Orientation="Vertical" Classes="field-container">
                    <TextBlock Text="Note: " Classes="field-label" />
                    <TextBox Classes="large-input"
                             Text="{Binding Notes}"
                             Watermark="Add a note as a reminder of this income..."/>
                </StackPanel>
                
                <!-- Submit Button -->
                <Button Content="💰 Add Income" 
                        Classes="submit-btn" 
                        Command="{Binding SubmitExpenseCommand}" />
            </StackPanel>
        </Border>
    </Grid>
   </ScrollViewer>  
    
</UserControl>